import{v as w,p as I,a as E}from"./filepond-plugin-image-preview.min-957928a1.js";import{_ as B,r as h,o as F,c as P,a as x}from"./index-d0ec4eb2.js";/*!
 * FilePondPluginImageExifOrientation 1.0.11
 * Licensed under MIT, https://opensource.org/licenses/MIT/
 * Please visit https://pqina.nl/filepond/ for details.
 */const y=e=>/^image\/jpeg/.test(e.type),s={JPEG:65496,APP1:65505,EXIF:1165519206,TIFF:18761,Orientation:274,Unknown:65280},r=(e,A,o=!1)=>e.getUint16(A,o),u=(e,A,o=!1)=>e.getUint32(A,o),O=e=>new Promise((A,o)=>{const i=new FileReader;i.onload=function(a){const n=new DataView(a.target.result);if(r(n,0)!==s.JPEG){A(-1);return}const l=n.byteLength;let t=2;for(;t<l;){const d=r(n,t);if(t+=2,d===s.APP1){if(u(n,t+=2)!==s.EXIF)break;const c=r(n,t+=6)===s.TIFF;t+=u(n,t+4,c);const _=r(n,t,c);t+=2;for(let f=0;f<_;f++)if(r(n,t+f*12,c)===s.Orientation){A(r(n,t+f*12+8,c));return}}else{if((d&s.Unknown)!==s.Unknown)break;t+=r(n,t)}}A(-1)},i.readAsArrayBuffer(e.slice(0,64*1024))}),k=(()=>typeof window<"u"&&typeof window.document<"u")(),v=()=>k,T="data:image/jpg;base64,/9j/4AAQSkZJRgABAQEASABIAAD/4QA6RXhpZgAATU0AKgAAAAgAAwESAAMAAAABAAYAAAEoAAMAAAABAAIAAAITAAMAAAABAAEAAAAAAAD/2wBDAP//////////////////////////////////////////////////////////////////////////////////////wAALCAABAAIBASIA/8QAJgABAAAAAAAAAAAAAAAAAAAAAxABAAAAAAAAAAAAAAAAAAAAAP/aAAgBAQAAPwBH/9k=";let g;const p=v()?new Image:{};p.onload=()=>g=p.naturalWidth>p.naturalHeight;p.src=T;const D=()=>g,m=({addFilter:e,utils:A})=>{const{Type:o,isFile:i}=A;return e("DID_LOAD_ITEM",(a,{query:n})=>new Promise((l,t)=>{const d=a.file;if(!i(d)||!y(d)||!n("GET_ALLOW_IMAGE_EXIF_ORIENTATION")||!D())return l(a);O(d).then(c=>{a.setMetadata("exif",{orientation:c}),l(a)})})),{options:{allowImageExifOrientation:[!0,o.BOOLEAN]}}},S=typeof window<"u"&&typeof window.document<"u";S&&document.dispatchEvent(new CustomEvent("FilePond:pluginloaded",{detail:m}));const b=w(E,m,I),U={name:"HelloWorld",data:function(){return{myServer:{process:(e,A,o,i)=>{setTimeout(()=>{i(Date.now())},1500)},load:(e,A)=>{fetch(e).then(o=>o.blob()).then(A)}}}},methods:{handleFilePondInit:function(){}},components:{FilePond:b}};function M(e,A,o,i,a,n){const l=h("file-pond");return F(),P("div",null,[x(l,{name:"test",ref:"pond",server:e.myServer,onInit:n.handleFilePondInit,"label-idle":"Default file <span class='filepond--label-action'></span>"},null,8,["server","onInit"])])}const $=B(U,[["render",M],["__scopeId","data-v-3772ee22"]]);export{$ as F,m as p};
